import React, { useState } from "react";
import {
    View,
    Text,
    StyleSheet,
    TouchableOpacity,
    FlatList,
} from "react-native";
import { LABELS, NOTES } from "../data/dummy-data";

const ManageLabelsScreen = ({ route, navigation }) => {
    const { noteId } = route.params;
    const note: any = NOTES.find((n) => n.id === noteId);

    const [selectedLabelIds, setSelectedLabelIds] = useState(note.labelIds);

    const toggleLabelHandler = (labelId) => {
        if (selectedLabelIds.includes(labelId)) {
            setSelectedLabelIds(
                selectedLabelIds.filter((id) => id !== labelId)
            );
        } else {
            setSelectedLabelIds([...selectedLabelIds, labelId]);
        }
    };

    const saveLabelsHandler = () => {
        note.labelIds = selectedLabelIds;
        navigation.goBack();
    };

    const renderLabelItem = ({ item }) => {
        const isSelected = selectedLabelIds.includes(item.id);

        return (
            // <TouchableOpacity
            //     style={[styles.labelItem, isSelected && styles.selectedLabel]}
            //     onPress={() => toggleLabelHandler(item.id)}
            // >
            //     <Text style={styles.labelText}>{item.label}</Text>
            // </TouchableOpacity>
        );
    };

    return (
        <View style={styles.screen}>
            <FlatList
                data={LABELS}
                keyExtractor={(item) => item.id}
                renderItem={renderLabelItem}
                numColumns={2}
            />
            <TouchableOpacity
                style={styles.saveButton}
                onPress={saveLabelsHandler}
            >
                <Text style={styles.saveButtonText}>Save Labels</Text>
            </TouchableOpacity>
        </View>
    );
};

const styles = StyleSheet.create({
    screen: {
        // flex: 1,
        // padding: 20,
    },
    labelItem: {
        // flex: 1,
        // margin: 10,
        // padding: 10,
        // backgroundColor: "#ccc",
        // alignItems: "center",
        // justifyContent: "center",
    },
    selectedLabel: {
        // backgroundColor: "#4caf50",
    },
    labelText: {
        // fontSize: 16,
    },
    saveButton: {
        // marginTop: 20,
        // padding: 15,
        // backgroundColor: "#4caf50",
        // alignItems: "center",
    },
    saveButtonText: {
        // color: "#fff",
        // fontSize: 18,
    },
});

export default ManageLabelsScreen;
